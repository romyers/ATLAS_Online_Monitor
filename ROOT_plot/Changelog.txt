## Known issues

- Occasional segfaults occur when opening and closing windows.
- Run viewer becomes inaccessible when closed unless the run is restarted.
- It is not obvious to user whether settings panel has been applied.

-------------------------------------------------------------------------------

## 2023-11-7

## Added

- RunStats.cpp defining a GUI component displaying statistics for a data run.
- The run viewer now contains a run stats window.
- Added noise rate display option to canvas selector.
- Added additional data to Plots.cpp for noise rate display. Began work on 
  restoring the noise rate display.

## Changed

- MonitorHooks now separates function interface and implementation for better
  indenting.
- Monitor.cpp renamed to the more semantically accurate Decoder.cpp.

-------------------------------------------------------------------------------

## 2023-10-24

## Added

- DAQData now tracks:
    Packet count
    Event count
- Added more validation to event decoding. Not quite everything is there yet
  though.

## Changed

- DAQData is now passed around rather than accessed directly with getInstance
  more often. Eventually, DAQData will not need to be a singleton.
    This includes MonitorHooks.cpp, where DAQData is now meant to be accessed
    via function parameters.
- Events can now handle TDC headers and trailers, and TDC headers and trailers
  need not be excluded when assembling events. The hitfinder simply ignores
  TDC headers and trailers.
- Signal.cpp now provides interface for reading header and trailer counts from
  event trailers, as well as header/trailer count error flags.
- Validation is now done on event TDC headers and trailers

## Fixed

- Fixed issue where the settings panel would not fully reenable when a run was
  stopped.

-------------------------------------------------------------------------------

## 2023-10-19

## Added

- Added a "Close All" button to RunViewer's canvas selector that closes any
  open plotting windows.

## Changed

- TDC header and trailer signals are now identified by all identifying bits
  not just the ones that are also the channel ID. This is relevant in cases
  where corrupted signals were classified as TDC headers or trailers.
- Starting and stopping runs now emit signals on the UISignalBus, which are
  connected to methods that disable and enable various UI elements.

## Fixed

- Fixed issue where signal validators would print unreadable characters instead
  of integer TDC error data for TDC error signals.
- Fixed issue where TDC header and trailer signals would be packaged into 
  events. The decode pipeline would ultimately try to bin them into events,
  and fail because their channels don't exist. TDC header and trailer signals
  are now discarded from the signal buffer before it is packaged into an event.
- Fixed issue where the run viewer would open on starting a run even if it was
  already open.

-------------------------------------------------------------------------------

## 2023-10-17

## Added

- Implemented signal bus for custom UI signals, along with an update signal 
  that is run every few UI update frames and connected to histogram plotting.
- Restored full ADC and TDC histogram plotting to the GUI version of the
  monitor.
- Added a window that opens on run start. Plotting windows can be opened and
  close from this window. Plotting windows should now exit nicely, without
  producing segfaults.

## Changed

- DAQData is now passed into the monitor from the decode thread for better
  organization.
- DAQData is reset at the start of the decode thread instead of the monitor
  thread.
- PCapSessionHandler now buffers all available packets at once with a call to
  pcap_dispatch with negative second argument, rather than buffering them one
  at a time. Packet counting has been updated for the new implementation.
- UI loop now makes some naive attempts to maintain a consistent frame rate.

## Fixed

- DeviceSelectorPanel::setDeviceName() would attempt a null dereference if 
  passed the name of a device that does not exist.
- Deleting various views would induce double deletion due to erroneous explicit
  calls to superclass destructors.